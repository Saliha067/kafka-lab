# Kafka 3.9.0 Server Configuration ( Upgrade Phase )
#=====================================================
# use this config only after all brokers are ruynning 3.9.0


Listeners=PLAINTEXT://localhost:9092
log.dirs=/kafka/logs
broker.id=0

# Replication settings
min.insync.replicas=2
default.replication.factor=3

# ZooKeeper connection
zookeeper.connect=localhost:2181
zookeeper.session.timeout.ms=30000

# Protocol version - keep at 3.7 during rolling upgrade
# this ensures compatibility with 3.7.0 brokers still running
inter.broker.protocol.version=3.7

# Message settings
message.max.bytes=500000
replica.fetch.max.bytes=500000
num.partitions=10

# Consumer settings
group.initial.rebalance.delay.ms=30000

# Performance settings
compression.type=lz4
num.network.threads=3

#Retention
log.retention.hours=24

# Topic management
auto.create.topics.enable=false

# Safety settings (IMPORTANT for migration)
auto.leader.rebalance.enable=false
unclean.leader.election.enable=false

# enable TRACE logging for debugging 
log4j.logger.org.apache.kafka.metadata.migration=TRACE
